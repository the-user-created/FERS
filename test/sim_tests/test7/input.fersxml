<?xml version="1.0" encoding="UTF-8"?>
<!-- Test CW radar. One Monostatic radar and one moving non-linear target -->
<!DOCTYPE simulation SYSTEM "../../xml_schema/fers-xml.dtd">
<simulation name="CW_Monostatic_Moving_Target_Test">

    <!-- Simulation Parameters -->
    <parameters>
        <starttime>0.0</starttime>
        <endtime>1.0</endtime>
        <c>299792458.0</c> <!-- Speed of light in meters/second -->
        <interprate>1e6</interprate> <!-- Interpolation rate for continuous wave -->
        <rate>1e6</rate> <!-- Sample rate override -->
        <randomseed>12345</randomseed> <!-- Random seed -->
        <export csv="true" binary="true" xml="true"/> <!-- Export options -->
    </parameters>

    <!-- Pulse Definition using a waveform file for continuous wave simulation -->
    <pulse name="cw_pulse" type="file" filename="waveform.csv">
        <power>100.0</power> <!-- Power in Watts -->
        <carrier>10e9</carrier> <!-- Carrier frequency in Hz (10 GHz) -->
    </pulse>

    <!-- Timing Definition -->
    <timing name="clock_1">
        <frequency>1e7</frequency> <!-- 10 MHz clock -->
    </timing>

    <!-- Antenna Definition -->
    <antenna name="mono_antenna" pattern="isotropic">
        <efficiency>0.9</efficiency> <!-- 90% efficient antenna -->
    </antenna>

    <!-- Platform Definition for the Monostatic Radar -->
    <platform name="monostatic_radar_platform">
        <motionpath interpolation="static">
            <positionwaypoint>
                <x>0.0</x>
                <y>0.0</y>
                <altitude>10.0</altitude> <!-- Radar is at 10 meters height -->
                <time>0.0</time>
            </positionwaypoint>
        </motionpath>
        <fixedrotation>
            <startazimuth>0.0</startazimuth>
            <startelevation>0.0</startelevation>
            <azimuthrate>0.0</azimuthrate>
            <elevationrate>0.0</elevationrate>
        </fixedrotation>
        <monostatic name="monostatic_radar" type="continuous" antenna="mono_antenna" pulse="cw_pulse" timing="clock_1">
            <window_skip>0</window_skip>
            <window_length>0.1</window_length>
            <prf>1</prf> <!-- FERS throws an error if PRF is not set (even for a continuous wave),
            so we set it to 1 so that the system behaves almost like a continuous wave -->
            <noise_temp>0</noise_temp> <!-- Receiver noise temperature in K -->
        </monostatic>
    </platform>

    <!-- Platform Definition for the Moving Target -->
    <platform name="moving_target_platform">
        <motionpath interpolation="cubic">
            <positionwaypoint>
                <x>1000.0</x>
                <y>0.0</y>
                <altitude>5.0</altitude>
                <time>0.0</time> <!-- Initial position of the target -->
            </positionwaypoint>
            <positionwaypoint>
                <x>800.0</x>
                <y>500.0</y>
                <altitude>5.0</altitude>
                <time>5.0</time> <!-- Non-linear motion at midpoint -->
            </positionwaypoint>
            <positionwaypoint>
                <x>500.0</x>
                <y>1000.0</y>
                <altitude>5.0</altitude>
                <time>1.0</time> <!-- Final position of the target -->
            </positionwaypoint>
        </motionpath>
        <fixedrotation>
            <startazimuth>0.0</startazimuth>
            <startelevation>0.0</startelevation>
            <azimuthrate>0.0</azimuthrate>
            <elevationrate>0.0</elevationrate>
        </fixedrotation>
        <target name="moving_target">
            <rcs type="isotropic">
                <value>10.0</value> <!-- Radar cross-section of 10 square meters -->
            </rcs>
        </target>
    </platform>

</simulation>
